---
import { stegaClean } from '@sanity/client/stega';

import { decodeStegaValue } from '@app/lib/sanity/stega';
import {
  default as GeneralMarkdown,
  type Props as MarkdownProps,
} from '@app/components/general/markdown.astro';
import type { CommonSchemaType } from '@app/types/content';

export type SanityMarkdown = CommonSchemaType<'markdown'>;

export interface Props extends Omit<MarkdownProps, 'content'>, SanityMarkdown {}

const props = Astro.props;

const { content, ...rest } = props;
---

<GeneralMarkdown
  data-sanity={decodeStegaValue(content)}
  content={(content && stegaClean(content)) || undefined}
  {...rest}
/>
